{
  "version": 3,
  "sources": ["../../src/lib/lib.ts"],
  "sourcesContent": ["import type { SqlIobrokerAdapterRow } from '../types/types';\r\nimport type { JsonConfigTable } from './adapter-config';\r\n\r\nexport function calculateAverage(rows: SqlIobrokerAdapterRow[]): number {\r\n    let sum = 0;\r\n    rows.forEach(row => {\r\n        sum += Number(row.val);\r\n    });\r\n    return sum / rows.length;\r\n}\r\n\r\nexport function sumResult(rows: SqlIobrokerAdapterRow[]): number {\r\n    return rows.reduce((acc, row) => {\r\n        return acc + Number(row.val);\r\n    }, 0);\r\n}\r\n\r\nexport function differenceResult(rows: SqlIobrokerAdapterRow[]): number {\r\n    const firstRow = rows[0];\r\n    const lastRow = rows[rows.length - 1];\r\n\r\n    if (!firstRow?.val || !lastRow?.val) {\r\n        return 0;\r\n    }\r\n    return Number(lastRow.val) - Number(firstRow.val);\r\n}\r\n\r\ninterface JsonConfigTableWithOldTimestamp extends JsonConfigTable {\r\n    oldTimestamp?: number;\r\n}\r\n\r\nexport const addParamsToTableItem = (table: JsonConfigTable[]): JsonConfigTableWithOldTimestamp[] => {\r\n    const tableWithMoreParams: JsonConfigTableWithOldTimestamp[] = table;\r\n\r\n    return tableWithMoreParams.map(item => {\r\n        return { ...item, oldTimestamp: 0 };\r\n    });\r\n};\r\n\r\nexport const isDefined = (\r\n    value?: string | number | boolean | null | object,\r\n): value is string | number | boolean | object => {\r\n    return value !== undefined && value !== null;\r\n};\r\n\r\nexport const roundValue = <T>(entry: JsonConfigTable, val?: T): T | undefined => {\r\n    if (typeof val === 'string' || entry.round === 0 || typeof val !== 'number') {\r\n        return val;\r\n    }\r\n    return Number(val.toFixed(entry.round)) as T;\r\n};\r\n\r\nexport const toJSON = (val: object): string => {\r\n    return JSON.stringify(val, null, 2);\r\n};\r\n\r\nexport function toLocalTime(ts: number): string {\r\n    const date = new Date(ts);\r\n    const pad = (n: number): string => n.toString().padStart(2, '0');\r\n    return `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())} ${pad(date.getHours())}:${pad(date.getMinutes())}:${pad(date.getSeconds())}`;\r\n}\r\n\r\nexport const getRetentionTime = (entry: JsonConfigTable): number => {\r\n    if (entry.retentionValue === 0) {\r\n        return 0;\r\n    }\r\n    const now = Date.now();\r\n    switch (entry.retentionUnit) {\r\n        case 'hours':\r\n            return now - entry.retentionValue * 60 * 60 * 1000;\r\n        case 'days':\r\n            return now - entry.retentionValue * 24 * 60 * 60 * 1000;\r\n        case 'weeks':\r\n            return now - entry.retentionValue * 7 * 24 * 60 * 60 * 1000;\r\n        case 'months':\r\n            return now - entry.retentionValue * 30 * 24 * 60 * 60 * 1000; // Approximation\r\n        case 'years':\r\n            return now - entry.retentionValue * 365 * 24 * 60 * 60 * 1000; // Approximation\r\n        default:\r\n            return now;\r\n    }\r\n};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGO,SAAS,iBAAiB,MAAuC;AACpE,MAAI,MAAM;AACV,OAAK,QAAQ,SAAO;AAChB,WAAO,OAAO,IAAI,GAAG;AAAA,EACzB,CAAC;AACD,SAAO,MAAM,KAAK;AACtB;AAEO,SAAS,UAAU,MAAuC;AAC7D,SAAO,KAAK,OAAO,CAAC,KAAK,QAAQ;AAC7B,WAAO,MAAM,OAAO,IAAI,GAAG;AAAA,EAC/B,GAAG,CAAC;AACR;AAEO,SAAS,iBAAiB,MAAuC;AACpE,QAAM,WAAW,KAAK,CAAC;AACvB,QAAM,UAAU,KAAK,KAAK,SAAS,CAAC;AAEpC,MAAI,EAAC,qCAAU,QAAO,EAAC,mCAAS,MAAK;AACjC,WAAO;AAAA,EACX;AACA,SAAO,OAAO,QAAQ,GAAG,IAAI,OAAO,SAAS,GAAG;AACpD;AAMO,MAAM,uBAAuB,CAAC,UAAgE;AACjG,QAAM,sBAAyD;AAE/D,SAAO,oBAAoB,IAAI,UAAQ;AACnC,WAAO,EAAE,GAAG,MAAM,cAAc,EAAE;AAAA,EACtC,CAAC;AACL;AAEO,MAAM,YAAY,CACrB,UAC8C;AAC9C,SAAO,UAAU,UAAa,UAAU;AAC5C;AAEO,MAAM,aAAa,CAAI,OAAwB,QAA2B;AAC7E,MAAI,OAAO,QAAQ,YAAY,MAAM,UAAU,KAAK,OAAO,QAAQ,UAAU;AACzE,WAAO;AAAA,EACX;AACA,SAAO,OAAO,IAAI,QAAQ,MAAM,KAAK,CAAC;AAC1C;AAEO,MAAM,SAAS,CAAC,QAAwB;AAC3C,SAAO,KAAK,UAAU,KAAK,MAAM,CAAC;AACtC;AAEO,SAAS,YAAY,IAAoB;AAC5C,QAAM,OAAO,IAAI,KAAK,EAAE;AACxB,QAAM,MAAM,CAAC,MAAsB,EAAE,SAAS,EAAE,SAAS,GAAG,GAAG;AAC/D,SAAO,GAAG,KAAK,YAAY,CAAC,IAAI,IAAI,KAAK,SAAS,IAAI,CAAC,CAAC,IAAI,IAAI,KAAK,QAAQ,CAAC,CAAC,IAAI,IAAI,KAAK,SAAS,CAAC,CAAC,IAAI,IAAI,KAAK,WAAW,CAAC,CAAC,IAAI,IAAI,KAAK,WAAW,CAAC,CAAC;AAC/J;AAEO,MAAM,mBAAmB,CAAC,UAAmC;AAChE,MAAI,MAAM,mBAAmB,GAAG;AAC5B,WAAO;AAAA,EACX;AACA,QAAM,MAAM,KAAK,IAAI;AACrB,UAAQ,MAAM,eAAe;AAAA,IACzB,KAAK;AACD,aAAO,MAAM,MAAM,iBAAiB,KAAK,KAAK;AAAA,IAClD,KAAK;AACD,aAAO,MAAM,MAAM,iBAAiB,KAAK,KAAK,KAAK;AAAA,IACvD,KAAK;AACD,aAAO,MAAM,MAAM,iBAAiB,IAAI,KAAK,KAAK,KAAK;AAAA,IAC3D,KAAK;AACD,aAAO,MAAM,MAAM,iBAAiB,KAAK,KAAK,KAAK,KAAK;AAAA;AAAA,IAC5D,KAAK;AACD,aAAO,MAAM,MAAM,iBAAiB,MAAM,KAAK,KAAK,KAAK;AAAA;AAAA,IAC7D;AACI,aAAO;AAAA,EACf;AACJ;",
  "names": []
}
